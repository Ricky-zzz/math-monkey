<!-- templates/game/play.html -->
{% extends 'game/layout.html' %}

{% block body %}
<!-- MAIN APP CONTAINER -->
<div x-data="mathMonkey({{ user.profile.level }}, {{ user.profile.mmr }})"
    class="relative z-10 flex flex-col min-h-screen" x-cloak>

    <!-- 1. HEADER -->
    {% include "game/components/header.html" %}

    <!-- 2. SCENE CONTAINER -->
    <main class="flex-grow flex items-center justify-center p-4 mt-4">

        <!-- SCENE: MENU -->
        <div x-show="scene === 'menu'" class="w-full max-w-4xl" x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100">
            {% include "game/scenes/menu.html" %}
        </div>

        <!-- SCENE: SANDBOX -->
        <div x-show="scene === 'sandbox'" class="w-full max-w-2xl" style="display: none;"
            x-transition:enter="transition ease-out duration-300">
            {% include "game/scenes/sandbox.html" %}
        </div>

        <!-- SCENE: Leadeboard -->
        <div x-show="scene === 'leaderboard'" class="w-full" style="display: none;"
            x-transition:enter="transition ease-out duration-300">
            {% include "game/scenes/leaderboard.html" %}
        </div>

        <!-- SCENE: GAME -->
        <div x-show="scene === 'game'" class="w-full max-w-6xl" style="display: none;"
            x-transition:enter="transition ease-out duration-300">
            {% include "game/scenes/game.html" %}
        </div>

        <!-- SCENE: PROFILE -->
        <div x-show="scene === 'profile'" class="w-full max-w-6xl" style="display: none;"
            x-transition:enter="transition ease-out duration-300">
            {% include "game/scenes/profile.html" %}
        </div>

        <!-- SCENE: RESULTS -->
        <div x-show="scene === 'results'" class="w-full max-w-2xl" style="display: none;"
            x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 scale-95"
            x-transition:enter-end="opacity-100 scale-100">
            {% include "game/scenes/results.html" %}
        </div>

        {% include "game/components/level_up.html" %}

    </main>

</div>
{% endblock %}